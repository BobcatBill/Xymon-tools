#!/bin/bash

echo "Sensor Data Repository:"
tmpfile="sparky.tmp"
ipmitool sdr 2>&1 |egrep -v "Chassis Intr|PS Status" |while read line
 do
        if [[ $line =~ (ok)$ ]] ; then
               echo "&green $line"
        elif [[ $line =~ (ns)$ ]] ; then
               echo "&clear $line"
        else [[ $line =~ "Could not open device" ]]
                color=yellow
	fi

done >> $tmpfile

cat $tmpfile
rm "$tmpfile"
